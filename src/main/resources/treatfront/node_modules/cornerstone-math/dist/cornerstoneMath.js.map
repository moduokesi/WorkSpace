{"version":3,"sources":["webpack://cornerstoneMath/webpack/universalModuleDefinition","webpack://cornerstoneMath/webpack/bootstrap","webpack://cornerstoneMath/./Line3.js","webpack://cornerstoneMath/./index.js","webpack://cornerstoneMath/./lineSegment.js","webpack://cornerstoneMath/./math.js","webpack://cornerstoneMath/./matrix4.js","webpack://cornerstoneMath/./plane.js","webpack://cornerstoneMath/./point.js","webpack://cornerstoneMath/./quaternion.js","webpack://cornerstoneMath/./rect.js","webpack://cornerstoneMath/./vector3.js"],"names":["Line3","start","end","undefined","Vector3","copy","line","optionalTarget","result","addVectors","multiplyScalar","subVectors","distanceToSquared","distanceTo","t","delta","add","point","clampToLine","startP","startEnd","startEnd2","dot","startEnd_startP","closestPointToPointParameter","matrix","applyMatrix4","equals","da","clone","sub","db","dc","daCrossDb","cross","dcCrossDb","coplanarResult","normalizedCoplanarResult","lengthSq","s","isNaN","intersection","distanceTest","distanceSq","cornerstoneMath","lineSegment","clamp","degToRad","radToDeg","sign","Matrix4","Plane","quaternion","rect","sqr","x","dist2","v","w","y","distanceToPointSquared","l2","pt","distanceToPoint","Math","sqrt","intersectLine","lineSegment1","lineSegment2","intersectionPoint","x1","y1","x2","y2","x3","y3","x4","y4","a1","a2","b1","b2","c1","c2","r1","r2","r3","r4","denom","num","parseFloat","EPSILON","a","b","degrees","degreeToRadiansFactor","PI","radians","radianToDegreesFactor","NaN","approximatelyEquals","epsilon","_epsilon","abs","max","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","elements","Float32Array","te","q","z","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","ae","be","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","m","n","console","warn","multiplyMatrices","throwOnInvertible","me","det","msg","Error","identity","v1","array","offset","length","i","j","set","normal","constant","plane","inverseNormalLength","negate","sphere","center","radius","orthoPoint","perpendicularMagnitude","startSign","endSign","targetPlane","direction","origin","intersectionData","h1","h2","n1dotn2","prototype","setFromCoplanarPoints","v2","c","normalize","setFromNormalAndCoplanarPoint","denominator","pageToPoint","e","pageX","pageY","subtract","lhs","rhs","distance","from","to","distanceSquared","insideRect","left","width","top","height","findClosestPoint","sources","target","distances","minDistance","forEach","source","index","d","push","min","indexOf","Quaternion","axis","angle","halfAngle","sin","cos","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","rectToLineSegments","right","bottom","lineSegments","segment","rectToPoints","rectPoints","topLeft","bottomRight","doesIntersect","rect1","rect2","intersectLeftRight","intersectTopBottom","rect1Points","rect2Points","getIntersectionRect","intersectRect","value","multiplyVectors","scalar","qx","qy","qz","qw","ix","iy","iz","iw","invScalar","floor","ceil","round","divideScalar","l","oldLength","alpha","crossVectors","ax","ay","az","bx","by","bz","theta","acos","dx","dy","dz","sx","sy","sz","projectOnVector","vector","projectOnPlane","planeNormal","reflect","clampScalar","minVal","maxVal","applyAxisAngle","applyQuaternion","setFromAxisAngle"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,GAAG;;QAEH;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;QACA,MAAM;QACN;QACA;QACA,MAAM;QACN;QACA;QACA;QACA,OAAO;QACP;QACA;QACA;QACA;QACA;QACA;QACA,IAAI;QACJ;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;;QAEL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA,6BAA6B;QAC7B,6BAA6B;QAC7B;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA,qBAAqB,gBAAgB;QACrC;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,qBAAqB,gBAAgB;QACrC;QACA;QACA,KAAK;QACL;QACA;QACA,KAAK;QACL;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;;QAEL;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,KAAK;;QAEL;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA,kBAAkB,8BAA8B;QAChD;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,IAAI;QACJ;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,IAAI;QACJ;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA,OAAO;QACP;QACA;QACA;QACA;QACA,IAAI;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,oBAAoB,2BAA2B;QAC/C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,OAAO;QACP;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA,mBAAmB,cAAc;QACjC;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,gBAAgB,KAAK;QACrB;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA;QACA;QACA,gBAAgB,YAAY;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA,cAAc,4BAA4B;QAC1C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA,IAAI;;QAEJ;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;QACA,eAAe,4BAA4B;QAC3C;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA,eAAe,4BAA4B;QAC3C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,uCAAuC;QACxD;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,uCAAuC;QACxD;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,sBAAsB;QACvC;QACA;QACA;QACA,QAAQ;QACR;QACA;QACA;QACA;QACA;QACA;QACA,UAAU;QACV;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA,cAAc,wCAAwC;QACtD;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,OAAO;QACP;QACA;QACA;QACA;QACA;QACA;QACA,SAAS;QACT;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA;QACA;QACA,QAAQ;QACR;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA,KAAK;QACL;;QAEA;QACA;QACA;QACA,IAAI;QACJ;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,eAAe;QACf;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA,sCAAsC,uBAAuB;;;QAG7D;QACA;;;;;;;;;;;;;;;;;;;;;ACv1BA;;;;AACA;;;;;;AAEA;AACA;;;;IAKMA,K;AACJ,mBAAaC,KAAb,EAAoBC,GAApB,EAAyB;AAAA;;AAEvB,aAAKD,KAAL,GAAcA,UAAUE,SAAX,GAAwBF,KAAxB,GAAgC,IAAIG,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","file":"cornerstoneMath.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"cornerstone-math\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cornerstone-math\"] = factory();\n\telse\n\t\troot[\"cornerstoneMath\"] = factory();\n})(window, function() {\nreturn "," \tfunction hotDisposeChunk(chunkId) {\n \t\tdelete installedChunks[chunkId];\n \t}\n \tvar parentHotUpdateCallback = window[\"webpackHotUpdate\"];\n \twindow[\"webpackHotUpdate\"] = // eslint-disable-next-line no-unused-vars\n \tfunction webpackHotUpdateCallback(chunkId, moreModules) {\n \t\thotAddUpdateChunk(chunkId, moreModules);\n \t\tif (parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules);\n \t} ;\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadUpdateChunk(chunkId) {\n \t\tvar script = document.createElement(\"script\");\n \t\tscript.charset = \"utf-8\";\n \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".\" + hotCurrentHash + \".hot-update.js\";\n \t\tif (null) script.crossOrigin = null;\n \t\tdocument.head.appendChild(script);\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadManifest(requestTimeout) {\n \t\trequestTimeout = requestTimeout || 10000;\n \t\treturn new Promise(function(resolve, reject) {\n \t\t\tif (typeof XMLHttpRequest === \"undefined\") {\n \t\t\t\treturn reject(new Error(\"No browser support\"));\n \t\t\t}\n \t\t\ttry {\n \t\t\t\tvar request = new XMLHttpRequest();\n \t\t\t\tvar requestPath = __webpack_require__.p + \"\" + hotCurrentHash + \".hot-update.json\";\n \t\t\t\trequest.open(\"GET\", requestPath, true);\n \t\t\t\trequest.timeout = requestTimeout;\n \t\t\t\trequest.send(null);\n \t\t\t} catch (err) {\n \t\t\t\treturn reject(err);\n \t\t\t}\n \t\t\trequest.onreadystatechange = function() {\n \t\t\t\tif (request.readyState !== 4) return;\n \t\t\t\tif (request.status === 0) {\n \t\t\t\t\t// timeout\n \t\t\t\t\treject(\n \t\t\t\t\t\tnew Error(\"Manifest request to \" + requestPath + \" timed out.\")\n \t\t\t\t\t);\n \t\t\t\t} else if (request.status === 404) {\n \t\t\t\t\t// no update available\n \t\t\t\t\tresolve();\n \t\t\t\t} else if (request.status !== 200 && request.status !== 304) {\n \t\t\t\t\t// other failure\n \t\t\t\t\treject(new Error(\"Manifest request to \" + requestPath + \" failed.\"));\n \t\t\t\t} else {\n \t\t\t\t\t// success\n \t\t\t\t\ttry {\n \t\t\t\t\t\tvar update = JSON.parse(request.responseText);\n \t\t\t\t\t} catch (e) {\n \t\t\t\t\t\treject(e);\n \t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t\tresolve(update);\n \t\t\t\t}\n \t\t\t};\n \t\t});\n \t}\n\n \tvar hotApplyOnUpdate = true;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentHash = \"d9f71be1fa337ff6cfe7\";\n \tvar hotRequestTimeout = 10000;\n \tvar hotCurrentModuleData = {};\n \tvar hotCurrentChildModule;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParents = [];\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParentsTemp = [];\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateRequire(moduleId) {\n \t\tvar me = installedModules[moduleId];\n \t\tif (!me) return __webpack_require__;\n \t\tvar fn = function(request) {\n \t\t\tif (me.hot.active) {\n \t\t\t\tif (installedModules[request]) {\n \t\t\t\t\tif (installedModules[request].parents.indexOf(moduleId) === -1) {\n \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\thotCurrentParents = [moduleId];\n \t\t\t\t\thotCurrentChildModule = request;\n \t\t\t\t}\n \t\t\t\tif (me.children.indexOf(request) === -1) {\n \t\t\t\t\tme.children.push(request);\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tconsole.warn(\n \t\t\t\t\t\"[HMR] unexpected require(\" +\n \t\t\t\t\t\trequest +\n \t\t\t\t\t\t\") from disposed module \" +\n \t\t\t\t\t\tmoduleId\n \t\t\t\t);\n \t\t\t\thotCurrentParents = [];\n \t\t\t}\n \t\t\treturn __webpack_require__(request);\n \t\t};\n \t\tvar ObjectFactory = function ObjectFactory(name) {\n \t\t\treturn {\n \t\t\t\tconfigurable: true,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: function() {\n \t\t\t\t\treturn __webpack_require__[name];\n \t\t\t\t},\n \t\t\t\tset: function(value) {\n \t\t\t\t\t__webpack_require__[name] = value;\n \t\t\t\t}\n \t\t\t};\n \t\t};\n \t\tfor (var name in __webpack_require__) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(__webpack_require__, name) &&\n \t\t\t\tname !== \"e\" &&\n \t\t\t\tname !== \"t\"\n \t\t\t) {\n \t\t\t\tObject.defineProperty(fn, name, ObjectFactory(name));\n \t\t\t}\n \t\t}\n \t\tfn.e = function(chunkId) {\n \t\t\tif (hotStatus === \"ready\") hotSetStatus(\"prepare\");\n \t\t\thotChunksLoading++;\n \t\t\treturn __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {\n \t\t\t\tfinishChunkLoading();\n \t\t\t\tthrow err;\n \t\t\t});\n\n \t\t\tfunction finishChunkLoading() {\n \t\t\t\thotChunksLoading--;\n \t\t\t\tif (hotStatus === \"prepare\") {\n \t\t\t\t\tif (!hotWaitingFilesMap[chunkId]) {\n \t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t\t\t}\n \t\t\t\t\tif (hotChunksLoading === 0 && hotWaitingFiles === 0) {\n \t\t\t\t\t\thotUpdateDownloaded();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t};\n \t\tfn.t = function(value, mode) {\n \t\t\tif (mode & 1) value = fn(value);\n \t\t\treturn __webpack_require__.t(value, mode & ~1);\n \t\t};\n \t\treturn fn;\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateModule(moduleId) {\n \t\tvar hot = {\n \t\t\t// private stuff\n \t\t\t_acceptedDependencies: {},\n \t\t\t_declinedDependencies: {},\n \t\t\t_selfAccepted: false,\n \t\t\t_selfDeclined: false,\n \t\t\t_selfInvalidated: false,\n \t\t\t_disposeHandlers: [],\n \t\t\t_main: hotCurrentChildModule !== moduleId,\n\n \t\t\t// Module API\n \t\t\tactive: true,\n \t\t\taccept: function(dep, callback) {\n \t\t\t\tif (dep === undefined) hot._selfAccepted = true;\n \t\t\t\telse if (typeof dep === \"function\") hot._selfAccepted = dep;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function() {};\n \t\t\t\telse hot._acceptedDependencies[dep] = callback || function() {};\n \t\t\t},\n \t\t\tdecline: function(dep) {\n \t\t\t\tif (dep === undefined) hot._selfDeclined = true;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\n \t\t\t\telse hot._declinedDependencies[dep] = true;\n \t\t\t},\n \t\t\tdispose: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\taddDisposeHandler: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\tremoveDisposeHandler: function(callback) {\n \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\n \t\t\t\tif (idx >= 0) hot._disposeHandlers.splice(idx, 1);\n \t\t\t},\n \t\t\tinvalidate: function() {\n \t\t\t\tthis._selfInvalidated = true;\n \t\t\t\tswitch (hotStatus) {\n \t\t\t\t\tcase \"idle\":\n \t\t\t\t\t\thotUpdate = {};\n \t\t\t\t\t\thotUpdate[moduleId] = modules[moduleId];\n \t\t\t\t\t\thotSetStatus(\"ready\");\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"ready\":\n \t\t\t\t\t\thotApplyInvalidatedModule(moduleId);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"prepare\":\n \t\t\t\t\tcase \"check\":\n \t\t\t\t\tcase \"dispose\":\n \t\t\t\t\tcase \"apply\":\n \t\t\t\t\t\t(hotQueuedInvalidatedModules =\n \t\t\t\t\t\t\thotQueuedInvalidatedModules || []).push(moduleId);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\t// ignore requests in error states\n \t\t\t\t\t\tbreak;\n \t\t\t\t}\n \t\t\t},\n\n \t\t\t// Management API\n \t\t\tcheck: hotCheck,\n \t\t\tapply: hotApply,\n \t\t\tstatus: function(l) {\n \t\t\t\tif (!l) return hotStatus;\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\taddStatusHandler: function(l) {\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\tremoveStatusHandler: function(l) {\n \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\n \t\t\t\tif (idx >= 0) hotStatusHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t//inherit from previous dispose call\n \t\t\tdata: hotCurrentModuleData[moduleId]\n \t\t};\n \t\thotCurrentChildModule = undefined;\n \t\treturn hot;\n \t}\n\n \tvar hotStatusHandlers = [];\n \tvar hotStatus = \"idle\";\n\n \tfunction hotSetStatus(newStatus) {\n \t\thotStatus = newStatus;\n \t\tfor (var i = 0; i < hotStatusHandlers.length; i++)\n \t\t\thotStatusHandlers[i].call(null, newStatus);\n \t}\n\n \t// while downloading\n \tvar hotWaitingFiles = 0;\n \tvar hotChunksLoading = 0;\n \tvar hotWaitingFilesMap = {};\n \tvar hotRequestedFilesMap = {};\n \tvar hotAvailableFilesMap = {};\n \tvar hotDeferred;\n\n \t// The update info\n \tvar hotUpdate, hotUpdateNewHash, hotQueuedInvalidatedModules;\n\n \tfunction toModuleId(id) {\n \t\tvar isNumber = +id + \"\" === id;\n \t\treturn isNumber ? +id : id;\n \t}\n\n \tfunction hotCheck(apply) {\n \t\tif (hotStatus !== \"idle\") {\n \t\t\tthrow new Error(\"check() is only allowed in idle status\");\n \t\t}\n \t\thotApplyOnUpdate = apply;\n \t\thotSetStatus(\"check\");\n \t\treturn hotDownloadManifest(hotRequestTimeout).then(function(update) {\n \t\t\tif (!update) {\n \t\t\t\thotSetStatus(hotApplyInvalidatedModules() ? \"ready\" : \"idle\");\n \t\t\t\treturn null;\n \t\t\t}\n \t\t\thotRequestedFilesMap = {};\n \t\t\thotWaitingFilesMap = {};\n \t\t\thotAvailableFilesMap = update.c;\n \t\t\thotUpdateNewHash = update.h;\n\n \t\t\thotSetStatus(\"prepare\");\n \t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\thotDeferred = {\n \t\t\t\t\tresolve: resolve,\n \t\t\t\t\treject: reject\n \t\t\t\t};\n \t\t\t});\n \t\t\thotUpdate = {};\n \t\t\tvar chunkId = \"cornerstoneMath\";\n \t\t\t// eslint-disable-next-line no-lone-blocks\n \t\t\t{\n \t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t}\n \t\t\tif (\n \t\t\t\thotStatus === \"prepare\" &&\n \t\t\t\thotChunksLoading === 0 &&\n \t\t\t\thotWaitingFiles === 0\n \t\t\t) {\n \t\t\t\thotUpdateDownloaded();\n \t\t\t}\n \t\t\treturn promise;\n \t\t});\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotAddUpdateChunk(chunkId, moreModules) {\n \t\tif (!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\n \t\t\treturn;\n \t\thotRequestedFilesMap[chunkId] = false;\n \t\tfor (var moduleId in moreModules) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif (--hotWaitingFiles === 0 && hotChunksLoading === 0) {\n \t\t\thotUpdateDownloaded();\n \t\t}\n \t}\n\n \tfunction hotEnsureUpdateChunk(chunkId) {\n \t\tif (!hotAvailableFilesMap[chunkId]) {\n \t\t\thotWaitingFilesMap[chunkId] = true;\n \t\t} else {\n \t\t\thotRequestedFilesMap[chunkId] = true;\n \t\t\thotWaitingFiles++;\n \t\t\thotDownloadUpdateChunk(chunkId);\n \t\t}\n \t}\n\n \tfunction hotUpdateDownloaded() {\n \t\thotSetStatus(\"ready\");\n \t\tvar deferred = hotDeferred;\n \t\thotDeferred = null;\n \t\tif (!deferred) return;\n \t\tif (hotApplyOnUpdate) {\n \t\t\t// Wrap deferred object in Promise to mark it as a well-handled Promise to\n \t\t\t// avoid triggering uncaught exception warning in Chrome.\n \t\t\t// See https://bugs.chromium.org/p/chromium/issues/detail?id=465666\n \t\t\tPromise.resolve()\n \t\t\t\t.then(function() {\n \t\t\t\t\treturn hotApply(hotApplyOnUpdate);\n \t\t\t\t})\n \t\t\t\t.then(\n \t\t\t\t\tfunction(result) {\n \t\t\t\t\t\tdeferred.resolve(result);\n \t\t\t\t\t},\n \t\t\t\t\tfunction(err) {\n \t\t\t\t\t\tdeferred.reject(err);\n \t\t\t\t\t}\n \t\t\t\t);\n \t\t} else {\n \t\t\tvar outdatedModules = [];\n \t\t\tfor (var id in hotUpdate) {\n \t\t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\t\toutdatedModules.push(toModuleId(id));\n \t\t\t\t}\n \t\t\t}\n \t\t\tdeferred.resolve(outdatedModules);\n \t\t}\n \t}\n\n \tfunction hotApply(options) {\n \t\tif (hotStatus !== \"ready\")\n \t\t\tthrow new Error(\"apply() is only allowed in ready status\");\n \t\toptions = options || {};\n \t\treturn hotApplyInternal(options);\n \t}\n\n \tfunction hotApplyInternal(options) {\n \t\thotApplyInvalidatedModules();\n\n \t\tvar cb;\n \t\tvar i;\n \t\tvar j;\n \t\tvar module;\n \t\tvar moduleId;\n\n \t\tfunction getAffectedStuff(updateModuleId) {\n \t\t\tvar outdatedModules = [updateModuleId];\n \t\t\tvar outdatedDependencies = {};\n\n \t\t\tvar queue = outdatedModules.map(function(id) {\n \t\t\t\treturn {\n \t\t\t\t\tchain: [id],\n \t\t\t\t\tid: id\n \t\t\t\t};\n \t\t\t});\n \t\t\twhile (queue.length > 0) {\n \t\t\t\tvar queueItem = queue.pop();\n \t\t\t\tvar moduleId = queueItem.id;\n \t\t\t\tvar chain = queueItem.chain;\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (\n \t\t\t\t\t!module ||\n \t\t\t\t\t(module.hot._selfAccepted && !module.hot._selfInvalidated)\n \t\t\t\t)\n \t\t\t\t\tcontinue;\n \t\t\t\tif (module.hot._selfDeclined) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"self-declined\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tif (module.hot._main) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"unaccepted\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tfor (var i = 0; i < module.parents.length; i++) {\n \t\t\t\t\tvar parentId = module.parents[i];\n \t\t\t\t\tvar parent = installedModules[parentId];\n \t\t\t\t\tif (!parent) continue;\n \t\t\t\t\tif (parent.hot._declinedDependencies[moduleId]) {\n \t\t\t\t\t\treturn {\n \t\t\t\t\t\t\ttype: \"declined\",\n \t\t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\tparentId: parentId\n \t\t\t\t\t\t};\n \t\t\t\t\t}\n \t\t\t\t\tif (outdatedModules.indexOf(parentId) !== -1) continue;\n \t\t\t\t\tif (parent.hot._acceptedDependencies[moduleId]) {\n \t\t\t\t\t\tif (!outdatedDependencies[parentId])\n \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t\tdelete outdatedDependencies[parentId];\n \t\t\t\t\toutdatedModules.push(parentId);\n \t\t\t\t\tqueue.push({\n \t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\tid: parentId\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t}\n\n \t\t\treturn {\n \t\t\t\ttype: \"accepted\",\n \t\t\t\tmoduleId: updateModuleId,\n \t\t\t\toutdatedModules: outdatedModules,\n \t\t\t\toutdatedDependencies: outdatedDependencies\n \t\t\t};\n \t\t}\n\n \t\tfunction addAllToSet(a, b) {\n \t\t\tfor (var i = 0; i < b.length; i++) {\n \t\t\t\tvar item = b[i];\n \t\t\t\tif (a.indexOf(item) === -1) a.push(item);\n \t\t\t}\n \t\t}\n\n \t\t// at begin all updates modules are outdated\n \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\n \t\tvar outdatedDependencies = {};\n \t\tvar outdatedModules = [];\n \t\tvar appliedUpdate = {};\n\n \t\tvar warnUnexpectedRequire = function warnUnexpectedRequire() {\n \t\t\tconsole.warn(\n \t\t\t\t\"[HMR] unexpected require(\" + result.moduleId + \") to disposed module\"\n \t\t\t);\n \t\t};\n\n \t\tfor (var id in hotUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\tmoduleId = toModuleId(id);\n \t\t\t\t/** @type {TODO} */\n \t\t\t\tvar result;\n \t\t\t\tif (hotUpdate[id]) {\n \t\t\t\t\tresult = getAffectedStuff(moduleId);\n \t\t\t\t} else {\n \t\t\t\t\tresult = {\n \t\t\t\t\t\ttype: \"disposed\",\n \t\t\t\t\t\tmoduleId: id\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\t/** @type {Error|false} */\n \t\t\t\tvar abortError = false;\n \t\t\t\tvar doApply = false;\n \t\t\t\tvar doDispose = false;\n \t\t\t\tvar chainInfo = \"\";\n \t\t\t\tif (result.chain) {\n \t\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\n \t\t\t\t}\n \t\t\t\tswitch (result.type) {\n \t\t\t\t\tcase \"self-declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of self decline: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of declined dependency: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\t\" in \" +\n \t\t\t\t\t\t\t\t\tresult.parentId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"unaccepted\":\n \t\t\t\t\t\tif (options.onUnaccepted) options.onUnaccepted(result);\n \t\t\t\t\t\tif (!options.ignoreUnaccepted)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"accepted\":\n \t\t\t\t\t\tif (options.onAccepted) options.onAccepted(result);\n \t\t\t\t\t\tdoApply = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"disposed\":\n \t\t\t\t\t\tif (options.onDisposed) options.onDisposed(result);\n \t\t\t\t\t\tdoDispose = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\n \t\t\t\t}\n \t\t\t\tif (abortError) {\n \t\t\t\t\thotSetStatus(\"abort\");\n \t\t\t\t\treturn Promise.reject(abortError);\n \t\t\t\t}\n \t\t\t\tif (doApply) {\n \t\t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\n \t\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\n \t\t\t\t\tfor (moduleId in result.outdatedDependencies) {\n \t\t\t\t\t\tif (\n \t\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(\n \t\t\t\t\t\t\t\tresult.outdatedDependencies,\n \t\t\t\t\t\t\t\tmoduleId\n \t\t\t\t\t\t\t)\n \t\t\t\t\t\t) {\n \t\t\t\t\t\t\tif (!outdatedDependencies[moduleId])\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\n \t\t\t\t\t\t\taddAllToSet(\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId],\n \t\t\t\t\t\t\t\tresult.outdatedDependencies[moduleId]\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tif (doDispose) {\n \t\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\n \t\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Store self accepted outdated modules to require them later by the module system\n \t\tvar outdatedSelfAcceptedModules = [];\n \t\tfor (i = 0; i < outdatedModules.length; i++) {\n \t\t\tmoduleId = outdatedModules[i];\n \t\t\tif (\n \t\t\t\tinstalledModules[moduleId] &&\n \t\t\t\tinstalledModules[moduleId].hot._selfAccepted &&\n \t\t\t\t// removed self-accepted modules should not be required\n \t\t\t\tappliedUpdate[moduleId] !== warnUnexpectedRequire &&\n \t\t\t\t// when called invalidate self-accepting is not possible\n \t\t\t\t!installedModules[moduleId].hot._selfInvalidated\n \t\t\t) {\n \t\t\t\toutdatedSelfAcceptedModules.push({\n \t\t\t\t\tmodule: moduleId,\n \t\t\t\t\tparents: installedModules[moduleId].parents.slice(),\n \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\n \t\t\t\t});\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"dispose\" phase\n \t\thotSetStatus(\"dispose\");\n \t\tObject.keys(hotAvailableFilesMap).forEach(function(chunkId) {\n \t\t\tif (hotAvailableFilesMap[chunkId] === false) {\n \t\t\t\thotDisposeChunk(chunkId);\n \t\t\t}\n \t\t});\n\n \t\tvar idx;\n \t\tvar queue = outdatedModules.slice();\n \t\twhile (queue.length > 0) {\n \t\t\tmoduleId = queue.pop();\n \t\t\tmodule = installedModules[moduleId];\n \t\t\tif (!module) continue;\n\n \t\t\tvar data = {};\n\n \t\t\t// Call dispose handlers\n \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\n \t\t\tfor (j = 0; j < disposeHandlers.length; j++) {\n \t\t\t\tcb = disposeHandlers[j];\n \t\t\t\tcb(data);\n \t\t\t}\n \t\t\thotCurrentModuleData[moduleId] = data;\n\n \t\t\t// disable module (this disables requires from this module)\n \t\t\tmodule.hot.active = false;\n\n \t\t\t// remove module from cache\n \t\t\tdelete installedModules[moduleId];\n\n \t\t\t// when disposing there is no need to call dispose handler\n \t\t\tdelete outdatedDependencies[moduleId];\n\n \t\t\t// remove \"parents\" references from all children\n \t\t\tfor (j = 0; j < module.children.length; j++) {\n \t\t\t\tvar child = installedModules[module.children[j]];\n \t\t\t\tif (!child) continue;\n \t\t\t\tidx = child.parents.indexOf(moduleId);\n \t\t\t\tif (idx >= 0) {\n \t\t\t\t\tchild.parents.splice(idx, 1);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// remove outdated dependency from module children\n \t\tvar dependency;\n \t\tvar moduleOutdatedDependencies;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tfor (j = 0; j < moduleOutdatedDependencies.length; j++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\n \t\t\t\t\t\tidx = module.children.indexOf(dependency);\n \t\t\t\t\t\tif (idx >= 0) module.children.splice(idx, 1);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"apply\" phase\n \t\thotSetStatus(\"apply\");\n\n \t\tif (hotUpdateNewHash !== undefined) {\n \t\t\thotCurrentHash = hotUpdateNewHash;\n \t\t\thotUpdateNewHash = undefined;\n \t\t}\n \t\thotUpdate = undefined;\n\n \t\t// insert new code\n \t\tfor (moduleId in appliedUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\n \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\n \t\t\t}\n \t\t}\n\n \t\t// call accept handlers\n \t\tvar error = null;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tvar callbacks = [];\n \t\t\t\t\tfor (i = 0; i < moduleOutdatedDependencies.length; i++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[i];\n \t\t\t\t\t\tcb = module.hot._acceptedDependencies[dependency];\n \t\t\t\t\t\tif (cb) {\n \t\t\t\t\t\t\tif (callbacks.indexOf(cb) !== -1) continue;\n \t\t\t\t\t\t\tcallbacks.push(cb);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tfor (i = 0; i < callbacks.length; i++) {\n \t\t\t\t\t\tcb = callbacks[i];\n \t\t\t\t\t\ttry {\n \t\t\t\t\t\t\tcb(moduleOutdatedDependencies);\n \t\t\t\t\t\t} catch (err) {\n \t\t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n \t\t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\t\tdependencyId: moduleOutdatedDependencies[i],\n \t\t\t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Load self accepted modules\n \t\tfor (i = 0; i < outdatedSelfAcceptedModules.length; i++) {\n \t\t\tvar item = outdatedSelfAcceptedModules[i];\n \t\t\tmoduleId = item.module;\n \t\t\thotCurrentParents = item.parents;\n \t\t\thotCurrentChildModule = moduleId;\n \t\t\ttry {\n \t\t\t\t__webpack_require__(moduleId);\n \t\t\t} catch (err) {\n \t\t\t\tif (typeof item.errorHandler === \"function\") {\n \t\t\t\t\ttry {\n \t\t\t\t\t\titem.errorHandler(err);\n \t\t\t\t\t} catch (err2) {\n \t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\terror: err2,\n \t\t\t\t\t\t\t\toriginalError: err\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\tif (!error) error = err2;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\ttype: \"self-accept-errored\",\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t});\n \t\t\t\t\t}\n \t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// handle errors in accept handlers and self accepted module load\n \t\tif (error) {\n \t\t\thotSetStatus(\"fail\");\n \t\t\treturn Promise.reject(error);\n \t\t}\n\n \t\tif (hotQueuedInvalidatedModules) {\n \t\t\treturn hotApplyInternal(options).then(function(list) {\n \t\t\t\toutdatedModules.forEach(function(moduleId) {\n \t\t\t\t\tif (list.indexOf(moduleId) < 0) list.push(moduleId);\n \t\t\t\t});\n \t\t\t\treturn list;\n \t\t\t});\n \t\t}\n\n \t\thotSetStatus(\"idle\");\n \t\treturn new Promise(function(resolve) {\n \t\t\tresolve(outdatedModules);\n \t\t});\n \t}\n\n \tfunction hotApplyInvalidatedModules() {\n \t\tif (hotQueuedInvalidatedModules) {\n \t\t\tif (!hotUpdate) hotUpdate = {};\n \t\t\thotQueuedInvalidatedModules.forEach(hotApplyInvalidatedModule);\n \t\t\thotQueuedInvalidatedModules = undefined;\n \t\t\treturn true;\n \t\t}\n \t}\n\n \tfunction hotApplyInvalidatedModule(moduleId) {\n \t\tif (!Object.prototype.hasOwnProperty.call(hotUpdate, moduleId))\n \t\t\thotUpdate[moduleId] = modules[moduleId];\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {},\n \t\t\thot: hotCreateModule(moduleId),\n \t\t\tparents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),\n \t\t\tchildren: []\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// __webpack_hash__\n \t__webpack_require__.h = function() { return hotCurrentHash; };\n\n\n \t// Load entry module and return exports\n \treturn hotCreateRequire(\"./index.js\")(__webpack_require__.s = \"./index.js\");\n","import Vector3 from './vector3.js';\r\nimport { clamp, approximatelyEquals } from './math.js';\r\n\r\n// Copied from THREE.JS\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\n\r\nclass Line3 {\r\n  constructor (start, end) {\r\n\r\n    this.start = (start !== undefined) ? start : new Vector3();\r\n    this.end = (end !== undefined) ? end : new Vector3();\r\n\r\n  }\r\n\r\n  set (start, end) {\r\n\r\n    this.start.copy(start);\r\n    this.end.copy(end);\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  copy (line) {\r\n\r\n    this.start.copy(line.start);\r\n    this.end.copy(line.end);\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  center (optionalTarget) {\r\n\r\n    const result = optionalTarget || new Vector3();\r\n\r\n\r\n    return result.addVectors(this.start, this.end).multiplyScalar(0.5);\r\n\r\n  }\r\n\r\n  delta (optionalTarget) {\r\n\r\n    const result = optionalTarget || new Vector3();\r\n\r\n\r\n    return result.subVectors(this.end, this.start);\r\n\r\n  }\r\n\r\n  distanceSq () {\r\n\r\n    return this.start.distanceToSquared(this.end);\r\n\r\n  }\r\n\r\n  distance () {\r\n\r\n    return this.start.distanceTo(this.end);\r\n\r\n  }\r\n\r\n  at (t, optionalTarget) {\r\n\r\n    const result = optionalTarget || new Vector3();\r\n\r\n    return this.delta(result).multiplyScalar(t).add(this.start);\r\n\r\n  }\r\n\r\n  closestPointToPointParameter (point, clampToLine) {\r\n\r\n    const startP = new Vector3();\r\n    const startEnd = new Vector3();\r\n\r\n    startP.subVectors(point, this.start);\r\n    startEnd.subVectors(this.end, this.start);\r\n\r\n    const startEnd2 = startEnd.dot(startEnd);\r\n    const startEnd_startP = startEnd.dot(startP);\r\n\r\n    let t = startEnd_startP / startEnd2;\r\n\r\n    if (clampToLine) {\r\n      t = clamp(t, 0, 1);\r\n    }\r\n\r\n    return t;\r\n\r\n  }\r\n\r\n  closestPointToPoint (point, clampToLine, optionalTarget) {\r\n\r\n    const t = this.closestPointToPointParameter(point, clampToLine);\r\n\r\n    const result = optionalTarget || new Vector3();\r\n\r\n    return this.delta(result).multiplyScalar(t).add(this.start);\r\n\r\n  }\r\n\r\n  applyMatrix4 (matrix) {\r\n\r\n    this.start.applyMatrix4(matrix);\r\n    this.end.applyMatrix4(matrix);\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  equals (line) {\r\n\r\n    return line.start.equals(this.start) && line.end.equals(this.end);\r\n\r\n  }\r\n\r\n  clone () {\r\n\r\n    return new Line3().copy(this);\r\n\r\n  }\r\n\r\n  intersectLine (line) {\r\n    // http://stackoverflow.com/questions/2316490/the-algorithm-to-find-the-point-of-intersection-of-two-3d-line-segment/10288710#10288710\r\n    // Consider two lines r1 and r2, represented by the following parametric equations:A + vt and B + us, respectively.\r\n    // Where A is a point of r1 and v a vector parallel to line.\r\n    // And B is a point of r2 and u a vector parallel to line.\r\n    // 'this' represents r2 and 'line' represents r1\r\n    const da = this.end.clone().sub(this.start); //u\r\n    const db = line.end.clone().sub(line.start); //v\r\n    const dc = line.start.clone().sub(this.start); // AB\r\n\r\n    const daCrossDb = da.clone().cross(db);\r\n    const dcCrossDb = dc.clone().cross(db);\r\n\r\n    // Lines are not coplanar, stop here\r\n    // Coplanar only if the vectors AB, u, v are linearly dependent, i.e AB . (u × v) = 0\r\n    const coplanarResult = dc.dot(daCrossDb);\r\n    const normalizedCoplanarResult =\r\n      coplanarResult / (dc.lengthSq() * daCrossDb.lengthSq());\r\n    if (!approximatelyEquals(normalizedCoplanarResult, 0)) {\r\n      return;\r\n    }\r\n\r\n    const s = dcCrossDb.dot(daCrossDb) / daCrossDb.lengthSq();\r\n\r\n    // Make sure we have an intersection\r\n    if (s > 1.0 || isNaN(s)) {\r\n      return;\r\n    }\r\n\r\n    const intersection = this.start.clone().add(da.clone().multiplyScalar(s));\r\n    const distanceTest = intersection.clone().sub(line.start).lengthSq() + intersection.clone().sub(line.end).lengthSq();\r\n\r\n    if (distanceTest <= line.distanceSq()) {\r\n      return intersection;\r\n    }\r\n\r\n    return;\r\n  }\r\n}\r\n\r\nexport default Line3;\r\n","import { default as Line3 } from './Line3.js';\r\nimport { default as lineSegment } from './lineSegment.js';\r\nimport { clamp,\r\n  degToRad,\r\n  radToDeg,\r\n  sign } from './math.js';\r\n\r\nimport { default as Matrix4 } from './matrix4.js';\r\nimport { default as Plane } from './plane.js';\r\nimport { default as point } from './point.js';\r\nimport { default as quaternion } from './quaternion.js';\r\nimport { default as rect } from './rect.js';\r\nimport { default as Vector3 } from './vector3.js';\r\n\r\nconst cornerstoneMath = {\r\n  Line3,\r\n  lineSegment,\r\n  clamp,\r\n  degToRad,\r\n  radToDeg,\r\n  sign,\r\n  Matrix4,\r\n  Plane,\r\n  point,\r\n  quaternion,\r\n  rect,\r\n  Vector3\r\n};\r\n\r\nexport {\r\n  Line3,\r\n  lineSegment,\r\n  clamp,\r\n  degToRad,\r\n  radToDeg,\r\n  sign,\r\n  Matrix4,\r\n  Plane,\r\n  point,\r\n  quaternion,\r\n  rect,\r\n  Vector3\r\n};\r\n\r\nexport default cornerstoneMath;\r\n","import { sign } from './math.js';\r\n\r\n// Based on  http://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment\r\nfunction sqr (x) {\r\n  return x * x;\r\n}\r\n\r\nfunction dist2 (v, w) {\r\n  return sqr(v.x - w.x) + sqr(v.y - w.y);\r\n}\r\n\r\nfunction distanceToPointSquared (lineSegment, point) {\r\n  const l2 = dist2(lineSegment.start, lineSegment.end);\r\n\r\n  if(l2 === 0) {\r\n    return dist2(point, lineSegment.start);\r\n  }\r\n  const t = ((point.x - lineSegment.start.x) * (lineSegment.end.x - lineSegment.start.x) +\r\n        (point.y - lineSegment.start.y) * (lineSegment.end.y - lineSegment.start.y)) / l2;\r\n\r\n  if(t < 0) {\r\n    return dist2(point, lineSegment.start);\r\n  }\r\n  if(t > 1) {\r\n    return dist2(point, lineSegment.end);\r\n  }\r\n\r\n  const pt = {\r\n    x: lineSegment.start.x + t * (lineSegment.end.x - lineSegment.start.x),\r\n    y: lineSegment.start.y + t * (lineSegment.end.y - lineSegment.start.y)\r\n  };\r\n\r\n\r\n  return dist2(point, pt);\r\n}\r\n\r\nfunction distanceToPoint (lineSegment, point) {\r\n  return Math.sqrt(distanceToPointSquared(lineSegment, point));\r\n}\r\n\r\n// Returns intersection points of two lines\r\nfunction intersectLine (lineSegment1, lineSegment2) {\r\n  const intersectionPoint = {};\r\n\r\n  let x1 = lineSegment1.start.x,\r\n    y1 = lineSegment1.start.y,\r\n    x2 = lineSegment1.end.x,\r\n    y2 = lineSegment1.end.y,\r\n    x3 = lineSegment2.start.x,\r\n    y3 = lineSegment2.start.y,\r\n    x4 = lineSegment2.end.x,\r\n    y4 = lineSegment2.end.y;\r\n\r\n  // Coefficients of line equations\r\n  let a1, a2, b1, b2, c1, c2;\r\n  // Sign values\r\n  let r1, r2, r3, r4;\r\n\r\n  // Intermediate values\r\n  let denom, num;\r\n\r\n  // Compute a1, b1, c1, where line joining points 1 and 2 is \"a1 x  +  b1 y  +  c1  =  0\"\r\n  a1 = y2 - y1;\r\n  b1 = x1 - x2;\r\n  c1 = x2 * y1 - x1 * y2;\r\n\r\n  // Compute r3 and r4\r\n  r3 = a1 * x3 + b1 * y3 + c1;\r\n  r4 = a1 * x4 + b1 * y4 + c1;\r\n\r\n  /* Check signs of r3 and r4.  If both point 3 and point 4 lie on\r\n    * same side of line 1, the line segments do not intersect.\r\n    */\r\n\r\n  if (r3 !== 0 &&\r\n        r4 !== 0 &&\r\n        sign(r3) === sign(r4)) {\r\n    return;\r\n  }\r\n\r\n  // Compute a2, b2, c2\r\n  a2 = y4 - y3;\r\n  b2 = x3 - x4;\r\n  c2 = x4 * y3 - x3 * y4;\r\n\r\n  // Compute r1 and r2\r\n  r1 = a2 * x1 + b2 * y1 + c2;\r\n  r2 = a2 * x2 + b2 * y2 + c2;\r\n\r\n  /* Check signs of r1 and r2.  If both point 1 and point 2 lie\r\n    * on same side of second line segment, the line segments do\r\n    * not intersect.\r\n    */\r\n\r\n  if (r1 !== 0 &&\r\n        r2 !== 0 &&\r\n        sign(r1) === sign(r2)) {\r\n    return;\r\n  }\r\n\r\n  /* Line segments intersect: compute intersection point.\r\n    */\r\n\r\n  denom = (a1 * b2) - (a2 * b1);\r\n\r\n  /* The denom/2 is to get rounding instead of truncating.  It\r\n    * is added or subtracted to the numerator, depending upon the\r\n    * sign of the numerator.\r\n    */\r\n\r\n  num = (b1 * c2) - (b2 * c1);\r\n  const x = parseFloat(num / denom);\r\n\r\n  num = (a2 * c1) - (a1 * c2);\r\n  const y = parseFloat(num / denom);\r\n\r\n  intersectionPoint.x = x;\r\n  intersectionPoint.y = y;\r\n\r\n  return intersectionPoint;\r\n}\r\n\r\n// Module exports\r\nconst lineSegment = {\r\n  distanceToPoint,\r\n  intersectLine\r\n};\r\n\r\nexport default lineSegment;\r\n","const EPSILON = 0.0001;\r\n// Based on THREE.JS\r\nfunction clamp (x, a, b) {\r\n  return (x < a) ? a : ((x > b) ? b : x);\r\n}\r\n\r\nfunction degToRad (degrees) {\r\n  const degreeToRadiansFactor = Math.PI / 180;\r\n\r\n\r\n  return degrees * degreeToRadiansFactor;\r\n}\r\n\r\nfunction radToDeg (radians) {\r\n  const radianToDegreesFactor = 180 / Math.PI;\r\n\r\n\r\n  return radians * radianToDegreesFactor;\r\n}\r\n\r\n// Returns sign of number\r\nfunction sign (x) {\r\n  return typeof x === 'number' ? x ? x < 0 ? -1 : 1 : x === x ? 0 : NaN : NaN;\r\n}\r\n\r\n\r\n/**\r\n * \r\n * Compare if two numbers are equal(if they have approximately the same value). to prevent js float precision issue\r\n * Adapted from glmatrix\r\n * @param {number} a\r\n * @param {number} b\r\n * @param {number} epsilon Precision to define proximity\r\n * @return {boolean} check whether or not the arguments have approximately the same value\r\n * \r\n */\r\nfunction approximatelyEquals (a, b, epsilon) {\r\n  const _epsilon = epsilon || EPSILON;\r\n  return Math.abs(a - b) <= _epsilon*Math.max(1.0, Math.abs(a), Math.abs(b));\r\n}\r\n\r\nexport {\r\n  clamp,\r\n  degToRad,\r\n  approximatelyEquals,\r\n  radToDeg,\r\n  sign\r\n};\r\n","import Vector3 from './vector3.js';\r\n\r\n// Based on THREE.JS\r\nclass Matrix4 {\r\n\r\n  constructor (n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44) {\r\n    this.elements = new Float32Array(16);\r\n\r\n    // TODO: if n11 is undefined, then just set to identity, otherwise copy all other values into matrix\r\n    // We should not support semi specification of Matrix4, it is just weird.\r\n\r\n    const te = this.elements;\r\n\r\n    te[0] = (n11 !== undefined) ? n11 : 1; te[4] = n12 || 0; te[8] = n13 || 0; te[12] = n14 || 0;\r\n    te[1] = n21 || 0; te[5] = (n22 !== undefined) ? n22 : 1; te[9] = n23 || 0; te[13] = n24 || 0;\r\n    te[2] = n31 || 0; te[6] = n32 || 0; te[10] = (n33 !== undefined) ? n33 : 1; te[14] = n34 || 0;\r\n    te[3] = n41 || 0; te[7] = n42 || 0; te[11] = n43 || 0; te[15] = (n44 !== undefined) ? n44 : 1;\r\n\r\n  }\r\n\r\n  makeRotationFromQuaternion (q) {\r\n    const te = this.elements;\r\n\r\n    let x = q.x,\r\n      y = q.y,\r\n      z = q.z,\r\n      w = q.w;\r\n    let x2 = x + x,\r\n      y2 = y + y,\r\n      z2 = z + z;\r\n    let xx = x * x2,\r\n      xy = x * y2,\r\n      xz = x * z2;\r\n    let yy = y * y2,\r\n      yz = y * z2,\r\n      zz = z * z2;\r\n    let wx = w * x2,\r\n      wy = w * y2,\r\n      wz = w * z2;\r\n\r\n    te[0] = 1 - (yy + zz);\r\n    te[4] = xy - wz;\r\n    te[8] = xz + wy;\r\n\r\n    te[1] = xy + wz;\r\n    te[5] = 1 - (xx + zz);\r\n    te[9] = yz - wx;\r\n\r\n    te[2] = xz - wy;\r\n    te[6] = yz + wx;\r\n    te[10] = 1 - (xx + yy);\r\n\r\n    // Last column\r\n    te[3] = 0;\r\n    te[7] = 0;\r\n    te[11] = 0;\r\n\r\n    // Bottom row\r\n    te[12] = 0;\r\n    te[13] = 0;\r\n    te[14] = 0;\r\n    te[15] = 1;\r\n\r\n    return this;\r\n  }\r\n\r\n  multiplyMatrices (a, b) {\r\n    const ae = a.elements;\r\n    const be = b.elements;\r\n    const te = this.elements;\r\n\r\n    let a11 = ae[0],\r\n      a12 = ae[4],\r\n      a13 = ae[8],\r\n      a14 = ae[12];\r\n    let a21 = ae[1],\r\n      a22 = ae[5],\r\n      a23 = ae[9],\r\n      a24 = ae[13];\r\n    let a31 = ae[2],\r\n      a32 = ae[6],\r\n      a33 = ae[10],\r\n      a34 = ae[14];\r\n    let a41 = ae[3],\r\n      a42 = ae[7],\r\n      a43 = ae[11],\r\n      a44 = ae[15];\r\n\r\n    let b11 = be[0],\r\n      b12 = be[4],\r\n      b13 = be[8],\r\n      b14 = be[12];\r\n    let b21 = be[1],\r\n      b22 = be[5],\r\n      b23 = be[9],\r\n      b24 = be[13];\r\n    let b31 = be[2],\r\n      b32 = be[6],\r\n      b33 = be[10],\r\n      b34 = be[14];\r\n    let b41 = be[3],\r\n      b42 = be[7],\r\n      b43 = be[11],\r\n      b44 = be[15];\r\n\r\n    te[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n    te[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n    te[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n    te[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n    te[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n    te[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n    te[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n    te[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n    te[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n    te[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n    te[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n    te[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n    te[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n    te[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n    te[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n    te[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n    return this;\r\n  }\r\n\r\n  multiply (m, n) {\r\n\r\n    if (n !== undefined) {\r\n\r\n      console.warn('DEPRECATED: Matrix4\\'s .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.');\r\n\r\n      return this.multiplyMatrices(m, n);\r\n    }\r\n\r\n    return this.multiplyMatrices(this, m);\r\n  }\r\n\r\n  getInverse (m, throwOnInvertible) {\r\n\r\n    // Based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n    const te = this.elements;\r\n    const me = m.elements;\r\n\r\n    let n11 = me[0],\r\n      n12 = me[4],\r\n      n13 = me[8],\r\n      n14 = me[12];\r\n    let n21 = me[1],\r\n      n22 = me[5],\r\n      n23 = me[9],\r\n      n24 = me[13];\r\n    let n31 = me[2],\r\n      n32 = me[6],\r\n      n33 = me[10],\r\n      n34 = me[14];\r\n    let n41 = me[3],\r\n      n42 = me[7],\r\n      n43 = me[11],\r\n      n44 = me[15];\r\n\r\n    te[0] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;\r\n    te[4] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;\r\n    te[8] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;\r\n    te[12] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n    te[1] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\r\n    te[5] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\r\n    te[9] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\r\n    te[13] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\r\n    te[2] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\r\n    te[6] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\r\n    te[10] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\r\n    te[14] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\r\n    te[3] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\r\n    te[7] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\r\n    te[11] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\r\n    te[15] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\r\n\r\n    const det = n11 * te[0] + n21 * te[4] + n31 * te[8] + n41 * te[12];\r\n\r\n    if (det === 0) {\r\n\r\n      const msg = 'Matrix4.getInverse(): can\\'t invert matrix, determinant is 0';\r\n\r\n      if (throwOnInvertible || false) {\r\n\r\n        throw new Error(msg);\r\n\r\n      } else {\r\n\r\n        console.warn(msg);\r\n\r\n      }\r\n\r\n      this.identity();\r\n\r\n      return this;\r\n    }\r\n\r\n    this.multiplyScalar(1 / det);\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  applyToVector3Array () {\r\n\r\n    const v1 = new Vector3();\r\n\r\n    return function (array, offset, length) {\r\n\r\n      if (offset === undefined) {\r\n        offset = 0;\r\n      }\r\n      if (length === undefined) {\r\n        length = array.length;\r\n      }\r\n\r\n      for (var i = 0, j = offset; i < length; i += 3, j += 3) {\r\n\r\n        v1.x = array[j];\r\n        v1.y = array[j + 1];\r\n        v1.z = array[j + 2];\r\n\r\n        v1.applyMatrix4(this);\r\n\r\n        array[j] = v1.x;\r\n        array[j + 1] = v1.y;\r\n        array[j + 2] = v1.z;\r\n\r\n      }\r\n\r\n      return array;\r\n\r\n    };\r\n\r\n  }\r\n\r\n  makeTranslation (x, y, z) {\r\n\r\n    this.set(\r\n      1, 0, 0, x,\r\n      0, 1, 0, y,\r\n      0, 0, 1, z,\r\n      0, 0, 0, 1\r\n    );\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  multiplyScalar (s) {\r\n\r\n    const te = this.elements;\r\n\r\n    te[0] *= s; te[4] *= s; te[8] *= s; te[12] *= s;\r\n    te[1] *= s; te[5] *= s; te[9] *= s; te[13] *= s;\r\n    te[2] *= s; te[6] *= s; te[10] *= s; te[14] *= s;\r\n    te[3] *= s; te[7] *= s; te[11] *= s; te[15] *= s;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  set (n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44) {\r\n\r\n    const te = this.elements;\r\n\r\n    te[0] = n11; te[4] = n12; te[8] = n13; te[12] = n14;\r\n    te[1] = n21; te[5] = n22; te[9] = n23; te[13] = n24;\r\n    te[2] = n31; te[6] = n32; te[10] = n33; te[14] = n34;\r\n    te[3] = n41; te[7] = n42; te[11] = n43; te[15] = n44;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  makeScale (x, y, z) {\r\n\r\n    this.set(\r\n      x, 0, 0, 0,\r\n      0, y, 0, 0,\r\n      0, 0, z, 0,\r\n      0, 0, 0, 1\r\n    );\r\n\r\n    return this;\r\n\r\n  }\r\n}\r\n\r\nexport default Matrix4;\r\n","import Vector3 from './vector3.js';\r\n\r\n// Copied from Three.JS\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nclass Plane {\r\n  constructor (normal, constant) {\r\n\r\n    this.normal = (normal !== undefined) ? normal : new Vector3(1, 0, 0);\r\n    this.constant = (constant !== undefined) ? constant : 0;\r\n\r\n  }\r\n\r\n  set (normal, constant) {\r\n\r\n    this.normal.copy(normal);\r\n    this.constant = constant;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  setComponents (x, y, z, w) {\r\n\r\n    this.normal.set(x, y, z);\r\n    this.constant = w;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  setFromNormalAndCoplanarPoint (normal, point) {\r\n\r\n    this.normal.copy(normal);\r\n    // Must be this.normal, not normal, as this.normal is normalized\r\n    this.constant = -point.dot(this.normal);\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  copy (plane) {\r\n\r\n    this.normal.copy(plane.normal);\r\n    this.constant = plane.constant;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  normalize () {\r\n\r\n    // Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n    const inverseNormalLength = 1.0 / this.normal.length();\r\n\r\n    this.normal.multiplyScalar(inverseNormalLength);\r\n    this.constant *= inverseNormalLength;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  negate () {\r\n\r\n    this.constant *= -1;\r\n    this.normal.negate();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  distanceToPoint (point) {\r\n\r\n    return this.normal.dot(point) + this.constant;\r\n\r\n  }\r\n\r\n  distanceToSphere (sphere) {\r\n\r\n    return this.distanceToPoint(sphere.center) - sphere.radius;\r\n\r\n  }\r\n\r\n  projectPoint (point, optionalTarget) {\r\n\r\n    return this.orthoPoint(point, optionalTarget).sub(point).negate();\r\n\r\n  }\r\n\r\n  orthoPoint (point, optionalTarget) {\r\n\r\n    const perpendicularMagnitude = this.distanceToPoint(point);\r\n\r\n    const result = optionalTarget || new Vector3();\r\n\r\n\r\n    return result.copy(this.normal).multiplyScalar(perpendicularMagnitude);\r\n\r\n  }\r\n\r\n  isIntersectionLine (line) {\r\n\r\n    // Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n    const startSign = this.distanceToPoint(line.start);\r\n    const endSign = this.distanceToPoint(line.end);\r\n\r\n    return (startSign < 0 && endSign > 0) || (endSign < 0 && startSign > 0);\r\n\r\n  }\r\n\r\n  intersectPlane (targetPlane) {\r\n    // Returns the intersection line between two planes\r\n    const direction = this.normal.clone().cross(targetPlane.normal);\r\n    const origin = new Vector3();\r\n    const intersectionData = {\r\n      origin,\r\n      direction\r\n    };\r\n\r\n    // If the planes are parallel, return an empty vector for the intersection line\r\n    if (this.normal.clone().cross(targetPlane.normal).length < 1e-10) {\r\n      intersectionData.direction = new Vector3();\r\n\r\n      return intersectionData;\r\n    }\r\n\r\n    const h1 = this.constant;\r\n    const h2 = targetPlane.constant;\r\n    const n1dotn2 = this.normal.clone().dot(targetPlane.normal);\r\n\r\n    const c1 = -(h1 - h2 * n1dotn2) / (1 - n1dotn2 * n1dotn2);\r\n    const c2 = -(h2 - h1 * n1dotn2) / (1 - n1dotn2 * n1dotn2);\r\n\r\n    intersectionData.origin = this.normal.clone().multiplyScalar(c1).add(targetPlane.normal.clone().multiplyScalar(c2));\r\n\r\n    return intersectionData;\r\n  }\r\n\r\n  coplanarPoint (optionalTarget) {\r\n\r\n    const result = optionalTarget || new Vector3();\r\n\r\n\r\n    return result.copy(this.normal).multiplyScalar(-this.constant);\r\n\r\n  }\r\n\r\n  translate (offset) {\r\n\r\n    this.constant = this.constant - offset.dot(this.normal);\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  equals (plane) {\r\n\r\n    return plane.normal.equals(this.normal) && (plane.constant === this.constant);\r\n\r\n  }\r\n\r\n  clone () {\r\n\r\n    return new Plane().copy(this);\r\n\r\n  }\r\n}\r\n\r\nPlane.prototype.setFromCoplanarPoints = (function () {\r\n\r\n  const v1 = new Vector3();\r\n  const v2 = new Vector3();\r\n\r\n  return function (a, b, c) {\r\n\r\n    const normal = v1.subVectors(c, b).cross(v2.subVectors(a, b)).normalize();\r\n\r\n    // Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n    this.setFromNormalAndCoplanarPoint(normal, a);\r\n\r\n    return this;\r\n\r\n  };\r\n\r\n})();\r\n\r\nPlane.prototype.intersectLine = (function () {\r\n\r\n  const v1 = new Vector3();\r\n\r\n  return function (line, optionalTarget) {\r\n\r\n    const result = optionalTarget || new Vector3();\r\n\r\n    const direction = line.delta(v1);\r\n\r\n    const denominator = this.normal.dot(direction);\r\n\r\n    if (denominator === 0) {\r\n\r\n      // Line is coplanar, return origin\r\n      if (this.distanceToPoint(line.start) === 0) {\r\n\r\n        return result.copy(line.start);\r\n\r\n      }\r\n\r\n      // Unsure if this is the correct method to handle this case.\r\n      return undefined;\r\n\r\n    }\r\n\r\n    const t = -(line.start.dot(this.normal) + this.constant) / denominator;\r\n\r\n    if (t < 0 || t > 1) {\r\n\r\n      return undefined;\r\n\r\n    }\r\n\r\n    return result.copy(direction).multiplyScalar(t).add(line.start);\r\n\r\n  };\r\n\r\n})();\r\n\r\nexport default Plane;\r\n","function pageToPoint (e) {\r\n  return {\r\n    x: e.pageX,\r\n    y: e.pageY\r\n  };\r\n}\r\n\r\nfunction subtract (lhs, rhs) {\r\n  return {\r\n    x: lhs.x - rhs.x,\r\n    y: lhs.y - rhs.y\r\n  };\r\n}\r\n\r\nfunction copy (point) {\r\n  return {\r\n    x: point.x,\r\n    y: point.y\r\n  };\r\n}\r\n\r\nfunction distance (from, to) {\r\n  return Math.sqrt(distanceSquared(from, to));\r\n}\r\n\r\nfunction distanceSquared (from, to) {\r\n  const delta = subtract(from, to);\r\n\r\n\r\n  return delta.x * delta.x + delta.y * delta.y;\r\n}\r\n\r\nfunction insideRect (point, rect) {\r\n  if(point.x < rect.left ||\r\n        point.x > rect.left + rect.width ||\r\n        point.y < rect.top ||\r\n        point.y > rect.top + rect.height) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Returns the closest source point to a target point\r\n * given an array of source points.\r\n *\r\n * @param sources An Array of source Points\r\n * @param target The target Point\r\n * @returns Point The closest point from the points array\r\n */\r\nfunction findClosestPoint (sources, target) {\r\n  const distances = [];\r\n  let minDistance;\r\n\r\n  sources.forEach(function (source, index) {\r\n    const d = distance(source, target);\r\n\r\n    distances.push(d);\r\n\r\n    if (index === 0) {\r\n      minDistance = d;\r\n    } else {\r\n      minDistance = Math.min(d, minDistance);\r\n    }\r\n  });\r\n\r\n  const index = distances.indexOf(minDistance);\r\n\r\n\r\n  return sources[index];\r\n}\r\n\r\nconst point = {\r\n  subtract,\r\n  copy,\r\n  pageToPoint,\r\n  distance,\r\n  distanceSquared,\r\n  insideRect,\r\n  findClosestPoint\r\n};\r\n\r\nexport default point;\r\n","class Quaternion {\r\n  constructor (x, y, z, w) {\r\n    this.x = x || 0;\r\n    this.y = y || 0;\r\n    this.z = z || 0;\r\n    this.w = (w !== undefined) ? w : 1;\r\n  }\r\n\r\n  setFromAxisAngle (axis, angle) {\r\n    let halfAngle = angle / 2,\r\n      s = Math.sin(halfAngle);\r\n\r\n    this.x = axis.x * s;\r\n    this.y = axis.y * s;\r\n    this.z = axis.z * s;\r\n    this.w = Math.cos(halfAngle);\r\n\r\n    return this;\r\n  }\r\n\r\n  multiplyQuaternions (a, b) {\r\n    let qax = a.x,\r\n      qay = a.y,\r\n      qaz = a.z,\r\n      qaw = a.w;\r\n    let qbx = b.x,\r\n      qby = b.y,\r\n      qbz = b.z,\r\n      qbw = b.w;\r\n\r\n    this.x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n    this.y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n    this.z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n    this.w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n    return this;\r\n  }\r\n\r\n  setFromRotationMatrix (m) {\r\n    let te = m.elements,\r\n\r\n      m11 = te[0],\r\n      m12 = te[4],\r\n      m13 = te[8],\r\n      m21 = te[1],\r\n      m22 = te[5],\r\n      m23 = te[9],\r\n      m31 = te[2],\r\n      m32 = te[6],\r\n      m33 = te[10],\r\n\r\n      trace = m11 + m22 + m33,\r\n      s;\r\n\r\n    if (trace > 0) {\r\n\r\n      s = 0.5 / Math.sqrt(trace + 1.0);\r\n\r\n      this.w = 0.25 / s;\r\n      this.x = (m32 - m23) * s;\r\n      this.y = (m13 - m31) * s;\r\n      this.z = (m21 - m12) * s;\r\n\r\n    } else if (m11 > m22 && m11 > m33) {\r\n\r\n      s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\r\n\r\n      this.w = (m32 - m23) / s;\r\n      this.x = 0.25 * s;\r\n      this.y = (m12 + m21) / s;\r\n      this.z = (m13 + m31) / s;\r\n\r\n    } else if (m22 > m33) {\r\n\r\n      s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\r\n\r\n      this.w = (m13 - m31) / s;\r\n      this.x = (m12 + m21) / s;\r\n      this.y = 0.25 * s;\r\n      this.z = (m23 + m32) / s;\r\n\r\n    } else {\r\n\r\n      s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\r\n\r\n      this.w = (m21 - m12) / s;\r\n      this.x = (m13 + m31) / s;\r\n      this.y = (m23 + m32) / s;\r\n      this.z = 0.25 * s;\r\n\r\n    }\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default Quaternion;\r\n","import lineSegment from './lineSegment.js';\r\n\r\nfunction rectToLineSegments (rect) {\r\n  const top = {\r\n    start: {\r\n      x: rect.left,\r\n      y: rect.top\r\n    },\r\n    end: {\r\n      x: rect.left + rect.width,\r\n      y: rect.top\r\n\r\n    }\r\n  };\r\n  const right = {\r\n    start: {\r\n      x: rect.left + rect.width,\r\n      y: rect.top\r\n    },\r\n    end: {\r\n      x: rect.left + rect.width,\r\n      y: rect.top + rect.height\r\n\r\n    }\r\n  };\r\n  const bottom = {\r\n    start: {\r\n      x: rect.left + rect.width,\r\n      y: rect.top + rect.height\r\n    },\r\n    end: {\r\n      x: rect.left,\r\n      y: rect.top + rect.height\r\n\r\n    }\r\n  };\r\n  const left = {\r\n    start: {\r\n      x: rect.left,\r\n      y: rect.top + rect.height\r\n    },\r\n    end: {\r\n      x: rect.left,\r\n      y: rect.top\r\n\r\n    }\r\n  };\r\n  const lineSegments = [top, right, bottom, left];\r\n\r\n\r\n  return lineSegments;\r\n}\r\n\r\nfunction distanceToPoint (rect, point) {\r\n  let minDistance = 655535;\r\n  const lineSegments = rectToLineSegments(rect);\r\n\r\n  lineSegments.forEach(function (segment) {\r\n    const distance = lineSegment.distanceToPoint(segment, point);\r\n\r\n    if(distance < minDistance) {\r\n      minDistance = distance;\r\n    }\r\n  });\r\n\r\n  return minDistance;\r\n}\r\n\r\n// Returns top-left and bottom-right points of the rectangle\r\nfunction rectToPoints (rect) {\r\n  const rectPoints = {\r\n    topLeft: {\r\n      x: rect.left,\r\n      y: rect.top\r\n    },\r\n    bottomRight: {\r\n      x: rect.left + rect.width,\r\n      y: rect.top + rect.height\r\n    }\r\n  };\r\n\r\n  return rectPoints;\r\n}\r\n\r\n// Returns whether two non-rotated rectangles are intersected\r\nfunction doesIntersect (rect1, rect2) {\r\n  let intersectLeftRight;\r\n  let intersectTopBottom;\r\n\r\n  const rect1Points = rectToPoints(rect1);\r\n  const rect2Points = rectToPoints(rect2);\r\n\r\n  if (rect1.width >= 0) {\r\n    if (rect2.width >= 0) {\r\n      intersectLeftRight = !((rect1Points.bottomRight.x <= rect2Points.topLeft.x) || (rect2Points.bottomRight.x <= rect1Points.topLeft.x));\r\n    } else {\r\n      intersectLeftRight = !((rect1Points.bottomRight.x <= rect2Points.bottomRight.x) || (rect2Points.topLeft.x <= rect1Points.topLeft.x));\r\n    }\r\n  } else if (rect2.width >= 0) {\r\n    intersectLeftRight = !((rect1Points.topLeft.x <= rect2Points.topLeft.x) || (rect2Points.bottomRight.x <= rect1Points.bottomRight.x));\r\n  } else {\r\n    intersectLeftRight = !((rect1Points.topLeft.x <= rect2Points.bottomRight.x) || (rect2Points.topLeft.x <= rect1Points.bottomRight.x));\r\n  }\r\n\r\n  if (rect1.height >= 0) {\r\n    if (rect2.height >= 0) {\r\n      intersectTopBottom = !((rect1Points.bottomRight.y <= rect2Points.topLeft.y) || (rect2Points.bottomRight.y <= rect1Points.topLeft.y));\r\n    } else {\r\n      intersectTopBottom = !((rect1Points.bottomRight.y <= rect2Points.bottomRight.y) || (rect2Points.topLeft.y <= rect1Points.topLeft.y));\r\n    }\r\n  } else if (rect2.height >= 0) {\r\n    intersectTopBottom = !((rect1Points.topLeft.y <= rect2Points.topLeft.y) || (rect2Points.bottomRight.y <= rect1Points.bottomRight.y));\r\n  } else {\r\n    intersectTopBottom = !((rect1Points.topLeft.y <= rect2Points.bottomRight.y) || (rect2Points.top <= rect1Points.bottomRight.y));\r\n  }\r\n\r\n  return intersectLeftRight && intersectTopBottom;\r\n}\r\n\r\n// Returns intersection points of two non-rotated rectangles\r\nfunction getIntersectionRect (rect1, rect2) {\r\n  const intersectRect = {\r\n    topLeft: {},\r\n    bottomRight: {}\r\n  };\r\n\r\n  if (!doesIntersect(rect1, rect2)) {\r\n    return;\r\n  }\r\n\r\n  const rect1Points = rectToPoints(rect1);\r\n  const rect2Points = rectToPoints(rect2);\r\n\r\n  if (rect1.width >= 0) {\r\n    if (rect2.width >= 0) {\r\n      intersectRect.topLeft.x = Math.max(rect1Points.topLeft.x, rect2Points.topLeft.x);\r\n      intersectRect.bottomRight.x = Math.min(rect1Points.bottomRight.x, rect2Points.bottomRight.x);\r\n    } else {\r\n      intersectRect.topLeft.x = Math.max(rect1Points.topLeft.x, rect2Points.bottomRight.x);\r\n      intersectRect.bottomRight.x = Math.min(rect1Points.bottomRight.x, rect2Points.topLeft.x);\r\n    }\r\n  } else if (rect2.width >= 0) {\r\n    intersectRect.topLeft.x = Math.min(rect1Points.topLeft.x, rect2Points.bottomRight.x);\r\n    intersectRect.bottomRight.x = Math.max(rect1Points.bottomRight.x, rect2Points.topLeft.x);\r\n  } else {\r\n    intersectRect.topLeft.x = Math.min(rect1Points.topLeft.x, rect2Points.topLeft.x);\r\n    intersectRect.bottomRight.x = Math.max(rect1Points.bottomRight.x, rect2Points.bottomRight.x);\r\n  }\r\n\r\n  if (rect1.height >= 0) {\r\n    if (rect2.height >= 0) {\r\n      intersectRect.topLeft.y = Math.max(rect1Points.topLeft.y, rect2Points.topLeft.y);\r\n      intersectRect.bottomRight.y = Math.min(rect1Points.bottomRight.y, rect2Points.bottomRight.y);\r\n    } else {\r\n      intersectRect.topLeft.y = Math.max(rect1Points.topLeft.y, rect2Points.bottomRight.y);\r\n      intersectRect.bottomRight.y = Math.min(rect1Points.bottomRight.y, rect2Points.topLeft.y);\r\n    }\r\n  } else if (rect2.height >= 0) {\r\n    intersectRect.topLeft.y = Math.min(rect1Points.topLeft.y, rect2Points.bottomRight.y);\r\n    intersectRect.bottomRight.y = Math.max(rect1Points.bottomRight.y, rect2Points.topLeft.y);\r\n  } else {\r\n    intersectRect.topLeft.y = Math.min(rect1Points.topLeft.y, rect2Points.topLeft.y);\r\n    intersectRect.bottomRight.y = Math.max(rect1Points.bottomRight.y, rect2Points.bottomRight.y);\r\n  }\r\n\r\n  // Returns top-left and bottom-right points of intersected rectangle\r\n  return intersectRect;\r\n\r\n}\r\n\r\nconst rect = {\r\n  distanceToPoint,\r\n  getIntersectionRect\r\n};\r\n\r\nexport default rect;\r\n","import Quaternion from './quaternion.js';\r\nimport { clamp } from './math.js';\r\n\r\n// Based on THREE.JS\r\nclass Vector3 {\r\n\r\n  constructor (x, y, z) {\r\n    this.x = x || 0;\r\n    this.y = y || 0;\r\n    this.z = z || 0;\r\n  }\r\n\r\n  set (x, y, z) {\r\n\r\n    this.x = x;\r\n    this.y = y;\r\n    this.z = z;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  setX (x) {\r\n\r\n    this.x = x;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  setY (y) {\r\n\r\n    this.y = y;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  setZ (z) {\r\n\r\n    this.z = z;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  setComponent (index, value) {\r\n\r\n    switch (index) {\r\n\r\n    case 0: this.x = value; break;\r\n    case 1: this.y = value; break;\r\n    case 2: this.z = value; break;\r\n    default: throw new Error(`index is out of range: ${index}`);\r\n\r\n    }\r\n\r\n  }\r\n\r\n  getComponent (index) {\r\n\r\n    switch (index) {\r\n\r\n    case 0: return this.x;\r\n    case 1: return this.y;\r\n    case 2: return this.z;\r\n    default: throw new Error(`index is out of range: ${index}`);\r\n\r\n    }\r\n\r\n  }\r\n\r\n  copy (v) {\r\n\r\n    this.x = v.x;\r\n    this.y = v.y;\r\n    this.z = v.z;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  add (v, w) {\r\n\r\n    if (w !== undefined) {\r\n\r\n      console.warn('DEPRECATED: Vector3\\'s .add() now only accepts one argument. Use .addVectors( a, b ) instead.');\r\n\r\n      return this.addVectors(v, w);\r\n\r\n    }\r\n\r\n    this.x += v.x;\r\n    this.y += v.y;\r\n    this.z += v.z;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  addScalar (s) {\r\n\r\n    this.x += s;\r\n    this.y += s;\r\n    this.z += s;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  addVectors (a, b) {\r\n\r\n    this.x = a.x + b.x;\r\n    this.y = a.y + b.y;\r\n    this.z = a.z + b.z;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  sub (v, w) {\r\n\r\n    if (w !== undefined) {\r\n\r\n      console.warn('DEPRECATED: Vector3\\'s .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');\r\n\r\n      return this.subVectors(v, w);\r\n\r\n    }\r\n\r\n    this.x -= v.x;\r\n    this.y -= v.y;\r\n    this.z -= v.z;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  subVectors (a, b) {\r\n\r\n    this.x = a.x - b.x;\r\n    this.y = a.y - b.y;\r\n    this.z = a.z - b.z;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  multiply (v, w) {\r\n\r\n    if (w !== undefined) {\r\n\r\n      console.warn('DEPRECATED: Vector3\\'s .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.');\r\n\r\n      return this.multiplyVectors(v, w);\r\n\r\n    }\r\n\r\n    this.x *= v.x;\r\n    this.y *= v.y;\r\n    this.z *= v.z;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  multiplyScalar (scalar) {\r\n\r\n    this.x *= scalar;\r\n    this.y *= scalar;\r\n    this.z *= scalar;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  multiplyVectors (a, b) {\r\n\r\n    this.x = a.x * b.x;\r\n    this.y = a.y * b.y;\r\n    this.z = a.z * b.z;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  applyMatrix3 (m) {\r\n\r\n    const x = this.x;\r\n    const y = this.y;\r\n    const z = this.z;\r\n\r\n    const e = m.elements;\r\n\r\n    this.x = e[0] * x + e[3] * y + e[6] * z;\r\n    this.y = e[1] * x + e[4] * y + e[7] * z;\r\n    this.z = e[2] * x + e[5] * y + e[8] * z;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  applyMatrix4 (m) {\r\n\r\n    // Input: THREE.Matrix4 affine matrix\r\n\r\n    let x = this.x,\r\n      y = this.y,\r\n      z = this.z;\r\n\r\n    const e = m.elements;\r\n\r\n    this.x = e[0] * x + e[4] * y + e[8] * z + e[12];\r\n    this.y = e[1] * x + e[5] * y + e[9] * z + e[13];\r\n    this.z = e[2] * x + e[6] * y + e[10] * z + e[14];\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  applyProjection (m) {\r\n\r\n    // Input: THREE.Matrix4 projection matrix\r\n\r\n    let x = this.x,\r\n      y = this.y,\r\n      z = this.z;\r\n\r\n    const e = m.elements;\r\n    const d = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]); // Perspective divide\r\n\r\n    this.x = (e[0] * x + e[4] * y + e[8] * z + e[12]) * d;\r\n    this.y = (e[1] * x + e[5] * y + e[9] * z + e[13]) * d;\r\n    this.z = (e[2] * x + e[6] * y + e[10] * z + e[14]) * d;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  applyQuaternion (q) {\r\n\r\n    const x = this.x;\r\n    const y = this.y;\r\n    const z = this.z;\r\n\r\n    const qx = q.x;\r\n    const qy = q.y;\r\n    const qz = q.z;\r\n    const qw = q.w;\r\n\r\n    // Calculate quat * vector\r\n\r\n    const ix = qw * x + qy * z - qz * y;\r\n    const iy = qw * y + qz * x - qx * z;\r\n    const iz = qw * z + qx * y - qy * x;\r\n    const iw = -qx * x - qy * y - qz * z;\r\n\r\n    // Calculate result * inverse quat\r\n\r\n    this.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\r\n    this.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\r\n    this.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  transformDirection (m) {\r\n\r\n    // Input: THREE.Matrix4 affine matrix\r\n    // Vector interpreted as a direction\r\n\r\n    let x = this.x,\r\n      y = this.y,\r\n      z = this.z;\r\n\r\n    const e = m.elements;\r\n\r\n    this.x = e[0] * x + e[4] * y + e[8] * z;\r\n    this.y = e[1] * x + e[5] * y + e[9] * z;\r\n    this.z = e[2] * x + e[6] * y + e[10] * z;\r\n\r\n    this.normalize();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  divide (v) {\r\n\r\n    this.x /= v.x;\r\n    this.y /= v.y;\r\n    this.z /= v.z;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  divideScalar (scalar) {\r\n\r\n    if (scalar !== 0) {\r\n\r\n      const invScalar = 1 / scalar;\r\n\r\n      this.x *= invScalar;\r\n      this.y *= invScalar;\r\n      this.z *= invScalar;\r\n\r\n    } else {\r\n\r\n      this.x = 0;\r\n      this.y = 0;\r\n      this.z = 0;\r\n\r\n    }\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  min (v) {\r\n\r\n    if (this.x > v.x) {\r\n\r\n      this.x = v.x;\r\n\r\n    }\r\n\r\n    if (this.y > v.y) {\r\n\r\n      this.y = v.y;\r\n\r\n    }\r\n\r\n    if (this.z > v.z) {\r\n\r\n      this.z = v.z;\r\n\r\n    }\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  max (v) {\r\n\r\n    if (this.x < v.x) {\r\n\r\n      this.x = v.x;\r\n\r\n    }\r\n\r\n    if (this.y < v.y) {\r\n\r\n      this.y = v.y;\r\n\r\n    }\r\n\r\n    if (this.z < v.z) {\r\n\r\n      this.z = v.z;\r\n\r\n    }\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  clamp (min, max) {\r\n\r\n    // This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n    if (this.x < min.x) {\r\n\r\n      this.x = min.x;\r\n\r\n    } else if (this.x > max.x) {\r\n\r\n      this.x = max.x;\r\n\r\n    }\r\n\r\n    if (this.y < min.y) {\r\n\r\n      this.y = min.y;\r\n\r\n    } else if (this.y > max.y) {\r\n\r\n      this.y = max.y;\r\n\r\n    }\r\n\r\n    if (this.z < min.z) {\r\n\r\n      this.z = min.z;\r\n\r\n    } else if (this.z > max.z) {\r\n\r\n      this.z = max.z;\r\n\r\n    }\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n\r\n  floor () {\r\n\r\n    this.x = Math.floor(this.x);\r\n    this.y = Math.floor(this.y);\r\n    this.z = Math.floor(this.z);\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  ceil () {\r\n\r\n    this.x = Math.ceil(this.x);\r\n    this.y = Math.ceil(this.y);\r\n    this.z = Math.ceil(this.z);\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  round () {\r\n\r\n    this.x = Math.round(this.x);\r\n    this.y = Math.round(this.y);\r\n    this.z = Math.round(this.z);\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  roundToZero () {\r\n\r\n    this.x = (this.x < 0) ? Math.ceil(this.x) : Math.floor(this.x);\r\n    this.y = (this.y < 0) ? Math.ceil(this.y) : Math.floor(this.y);\r\n    this.z = (this.z < 0) ? Math.ceil(this.z) : Math.floor(this.z);\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  negate () {\r\n\r\n    return this.multiplyScalar(-1);\r\n\r\n  }\r\n\r\n  dot (v) {\r\n\r\n    return this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n  }\r\n\r\n  lengthSq () {\r\n\r\n    return this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n  }\r\n\r\n  length () {\r\n\r\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n\r\n  }\r\n\r\n  lengthManhattan () {\r\n\r\n    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);\r\n\r\n  }\r\n\r\n  normalize () {\r\n\r\n    return this.divideScalar(this.length());\r\n\r\n  }\r\n\r\n  setLength (l) {\r\n\r\n    const oldLength = this.length();\r\n\r\n    if (oldLength !== 0 && l !== oldLength) {\r\n\r\n      this.multiplyScalar(l / oldLength);\r\n    }\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  lerp (v, alpha) {\r\n\r\n    this.x += (v.x - this.x) * alpha;\r\n    this.y += (v.y - this.y) * alpha;\r\n    this.z += (v.z - this.z) * alpha;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  cross (v, w) {\r\n\r\n    if (w !== undefined) {\r\n\r\n      console.warn('DEPRECATED: Vector3\\'s .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.');\r\n\r\n      return this.crossVectors(v, w);\r\n\r\n    }\r\n\r\n    let x = this.x,\r\n      y = this.y,\r\n      z = this.z;\r\n\r\n    this.x = y * v.z - z * v.y;\r\n    this.y = z * v.x - x * v.z;\r\n    this.z = x * v.y - y * v.x;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  crossVectors (a, b) {\r\n\r\n    let ax = a.x,\r\n      ay = a.y,\r\n      az = a.z;\r\n    let bx = b.x,\r\n      by = b.y,\r\n      bz = b.z;\r\n\r\n    this.x = ay * bz - az * by;\r\n    this.y = az * bx - ax * bz;\r\n    this.z = ax * by - ay * bx;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  angleTo (v) {\r\n\r\n    const theta = this.dot(v) / (this.length() * v.length());\r\n\r\n    // Clamp, to handle numerical problems\r\n\r\n    return Math.acos(clamp(theta, -1, 1));\r\n\r\n  }\r\n\r\n  distanceTo (v) {\r\n\r\n    return Math.sqrt(this.distanceToSquared(v));\r\n\r\n  }\r\n\r\n  distanceToSquared (v) {\r\n\r\n    const dx = this.x - v.x;\r\n    const dy = this.y - v.y;\r\n    const dz = this.z - v.z;\r\n\r\n    return dx * dx + dy * dy + dz * dz;\r\n\r\n  }\r\n\r\n  setFromMatrixPosition (m) {\r\n\r\n    this.x = m.elements[12];\r\n    this.y = m.elements[13];\r\n    this.z = m.elements[14];\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  setFromMatrixScale (m) {\r\n\r\n    const sx = this.set(m.elements[0], m.elements[1], m.elements[2]).length();\r\n    const sy = this.set(m.elements[4], m.elements[5], m.elements[6]).length();\r\n    const sz = this.set(m.elements[8], m.elements[9], m.elements[10]).length();\r\n\r\n    this.x = sx;\r\n    this.y = sy;\r\n    this.z = sz;\r\n\r\n    return this;\r\n  }\r\n\r\n  setFromMatrixColumn (index, matrix) {\r\n\r\n    const offset = index * 4;\r\n\r\n    const me = matrix.elements;\r\n\r\n    this.x = me[offset];\r\n    this.y = me[offset + 1];\r\n    this.z = me[offset + 2];\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  equals (v) {\r\n\r\n    return ((v.x === this.x) && (v.y === this.y) && (v.z === this.z));\r\n\r\n  }\r\n\r\n  fromArray (array) {\r\n\r\n    this.x = array[0];\r\n    this.y = array[1];\r\n    this.z = array[2];\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  toArray () {\r\n\r\n    return [this.x, this.y, this.z];\r\n\r\n  }\r\n\r\n  clone () {\r\n\r\n    return new Vector3(this.x, this.y, this.z);\r\n\r\n  }\r\n}\r\n\r\nVector3.prototype.projectOnVector = (function () {\r\n\r\n  let v1, dot;\r\n\r\n  return function (vector) {\r\n\r\n    if (v1 === undefined) {\r\n      v1 = new Vector3();\r\n    }\r\n\r\n    v1.copy(vector).normalize();\r\n\r\n    dot = this.dot(v1);\r\n\r\n    return this.copy(v1).multiplyScalar(dot);\r\n\r\n  };\r\n\r\n})();\r\n\r\nVector3.prototype.projectOnPlane = (function () {\r\n\r\n  let v1;\r\n\r\n  return function (planeNormal) {\r\n\r\n    if (v1 === undefined) {\r\n      v1 = new Vector3();\r\n    }\r\n\r\n    v1.copy(this).projectOnVector(planeNormal);\r\n\r\n    return this.sub(v1);\r\n\r\n  };\r\n\r\n})();\r\n\r\nVector3.prototype.reflect = (function () {\r\n\r\n  // Reflect incident vector off plane orthogonal to normal\r\n  // Normal is assumed to have unit length\r\n\r\n  let v1;\r\n\r\n  return function (normal) {\r\n\r\n    if (v1 === undefined) {\r\n      v1 = new Vector3();\r\n    }\r\n\r\n    return this.sub(v1.copy(normal).multiplyScalar(2 * this.dot(normal)));\r\n\r\n  };\r\n\r\n})();\r\n\r\n\r\nVector3.prototype.clampScalar = (function () {\r\n\r\n  let min, max;\r\n\r\n  return function (minVal, maxVal) {\r\n\r\n    if (min === undefined) {\r\n\r\n      min = new Vector3();\r\n      max = new Vector3();\r\n\r\n    }\r\n\r\n    min.set(minVal, minVal, minVal);\r\n    max.set(maxVal, maxVal, maxVal);\r\n\r\n    return this.clamp(min, max);\r\n\r\n  };\r\n\r\n})();\r\n\r\nVector3.prototype.applyAxisAngle = (function () {\r\n\r\n  let quaternion;\r\n\r\n  return function (axis, angle) {\r\n\r\n    if (quaternion === undefined) {\r\n      quaternion = new Quaternion();\r\n    }\r\n\r\n    this.applyQuaternion(quaternion.setFromAxisAngle(axis.normalize(), angle));\r\n\r\n    return this;\r\n\r\n  };\r\n\r\n})();\r\n\r\nexport default Vector3;\r\n"],"sourceRoot":""}