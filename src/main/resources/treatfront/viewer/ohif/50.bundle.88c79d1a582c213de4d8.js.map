{"version":3,"file":"50.bundle.88c79d1a582c213de4d8.js","mappings":"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","sources":["webpack:///../../../extensions/test-extension/src/id.js","webpack:///../../../extensions/test-extension/src/custom-context-menu/codingValues.ts","webpack:///../../../extensions/test-extension/src/custom-context-menu/contextMenuCodeItem.ts","webpack:///../../../extensions/test-extension/src/custom-context-menu/findingsContextMenu.ts","webpack:///../../../extensions/test-extension/src/custom-attribute/sameAs.ts","webpack:///../../../extensions/test-extension/src/custom-attribute/numberOfDisplaySets.ts","webpack:///../../../extensions/test-extension/src/custom-attribute/maxNumImageFrames.ts","webpack:///../../../extensions/test-extension/src/index.tsx","webpack:///../../../extensions/test-extension/src/getCustomizationModule.ts"],"sourcesContent":["import packageJson from '../package.json';\n\nconst id = packageJson.name;\n\nexport { id };\n","/**\n * Coding values is a map of simple string coding values to a set of\n * attributes associated with the coding value.\n *\n * The simple string is in the format `<codingSchemeDesignator>:<codingValue>`\n * That allows extracting the DICOM attributes from the designator/value, and\n * allows for passing around the simple string.\n * The additional attributes contained in the object include:\n *       * text - this is the coding scheme text display value, and may be language specific\n *       * type - this defines a named type, typically 'site'.  Different names can be used\n *                to allow setting different findingSites values in order to define a hierarchy.\n *       * color - used to apply annotation color\n * It is also possible to define additional attributes here, used by custom\n * extensions.\n *\n * See https://dicom.nema.org/medical/dicom/current/output/html/part16.html\n * for definitions of SCT and other code values.\n */\nconst codingValues = {\n  id: 'codingValues',\n\n  // Sites\n  'SCT:69536005': {\n    text: 'Head',\n    type: 'site',\n  },\n  'SCT:45048000': {\n    text: 'Neck',\n    type: 'site',\n  },\n  'SCT:818981001': {\n    text: 'Abdomen',\n    type: 'site',\n  },\n  'SCT:816092008': {\n    text: 'Pelvis',\n    type: 'site',\n  },\n\n  // Findings\n  'SCT:371861004': {\n    text: 'Mild intimal coronary irregularities',\n    color: 'green',\n  },\n  'SCT:194983005': {\n    text: 'Aortic insufficiency',\n    color: 'darkred',\n  },\n  'SCT:399232001': {\n    text: '2-chamber',\n  },\n  'SCT:103340004': {\n    text: 'SAX',\n  },\n  'SCT:91134007': {\n    text: 'MV',\n  },\n  'SCT:122972007': {\n    text: 'PV',\n  },\n\n  // Orientations\n  'SCT:24422004': {\n    text: 'Axial',\n    color: '#000000',\n    type: 'orientation',\n  },\n  'SCT:81654009': {\n    text: 'Coronal',\n    color: '#000000',\n    type: 'orientation',\n  },\n  'SCT:30730003': {\n    text: 'Sagittal',\n    color: '#000000',\n    type: 'orientation',\n  },\n};\n\nexport default codingValues;\n","const codeMenuItem = {\n  id: '@ohif/contextMenuAnnotationCode',\n\n  /** Applies the code value setup for this item */\n  transform: function (customizationService) {\n    const { code: codeRef } = this;\n    if (!codeRef) throw new Error(`item ${this} has no code ref`);\n    const codingValues = customizationService.get('codingValues');\n    const code = codingValues[codeRef];\n    return {\n      ...this,\n      codeRef,\n      code: { ref: codeRef, ...code },\n      label: code.text,\n      commands: [\n        {\n          commandName: 'updateMeasurement',\n        },\n      ],\n    };\n  },\n};\n\nexport default codeMenuItem;\n","const findingsContextMenu = {\n  id: 'measurementsContextMenu',\n  customizationType: 'ohif.contextMenu',\n  menus: [\n    {\n      id: 'forExistingMeasurement',\n      // selector restricts context menu to when there is nearbyToolData\n      selector: ({ nearbyToolData }) => !!nearbyToolData,\n      items: [\n        {\n          customizationType: 'ohif.contextSubMenu',\n          label: 'Site',\n          actionType: 'ShowSubMenu',\n          subMenu: 'siteSelectionSubMenu',\n        },\n        {\n          customizationType: 'ohif.contextSubMenu',\n          label: 'Finding',\n          actionType: 'ShowSubMenu',\n          subMenu: 'findingSelectionSubMenu',\n        },\n        {\n          // customizationType is implicit here in the configuration setup\n          label: 'Delete Measurement',\n          commands: [\n            {\n              commandName: 'deleteMeasurement',\n            },\n          ],\n        },\n        {\n          label: 'Add Label',\n          commands: [\n            {\n              commandName: 'setMeasurementLabel',\n            },\n          ],\n        },\n\n        // The example below shows how to include a delegating sub-menu,\n        // Only available on the @ohif/mnGrid hanging protocol\n        // To demonstrate, select the 3x1 layout from the protocol menu\n        // and right click on a measurement.\n        {\n          label: 'IncludeSubMenu',\n          selector: ({ protocol }) => protocol?.id === '@ohif/mnGrid',\n          delegating: true,\n          subMenu: 'orientationSelectionSubMenu',\n        },\n      ],\n    },\n\n    {\n      id: 'orientationSelectionSubMenu',\n      selector: ({ nearbyToolData }) => false,\n      items: [\n        {\n          customizationType: '@ohif/contextMenuAnnotationCode',\n          code: 'SCT:24422004',\n        },\n        {\n          customizationType: '@ohif/contextMenuAnnotationCode',\n          code: 'SCT:81654009',\n        },\n      ],\n    },\n\n    {\n      id: 'findingSelectionSubMenu',\n      selector: ({ nearbyToolData }) => false,\n      items: [\n        {\n          customizationType: '@ohif/contextMenuAnnotationCode',\n          code: 'SCT:371861004',\n        },\n        {\n          customizationType: '@ohif/contextMenuAnnotationCode',\n          code: 'SCT:194983005',\n        },\n      ],\n    },\n\n    {\n      id: 'siteSelectionSubMenu',\n      selector: ({ nearbyToolData }) => !!nearbyToolData,\n      items: [\n        {\n          customizationType: '@ohif/contextMenuAnnotationCode',\n          code: 'SCT:69536005',\n        },\n        {\n          customizationType: '@ohif/contextMenuAnnotationCode',\n          code: 'SCT:45048000',\n        },\n      ],\n    },\n  ],\n};\n\nexport default findingsContextMenu;\n","/**\n * This function extracts an attribute from the already matched display sets, and\n * compares it to the attribute in the current display set, and indicates if they match.\n * From 'this', it uses:\n *    `sameAttribute` as the attribute name to look for\n *    `sameDisplaySetId` as the display set id to look for\n * From `options`, it looks for \n */\nexport default function (displaySet, options) {\n  const { sameAttribute, sameDisplaySetId } = this;\n  if( !sameAttribute ) {\n    console.log(\"sameAttribute not defined in\", this);\n    return `sameAttribute not defined in ${this.id}`;\n  }\n  if( !sameDisplaySetId ) {\n    console.log(\"sameDisplaySetId not defined in\", this);\n    return `sameDisplaySetId not defined in ${this.id}`;\n  }\n  const { displaySetMatchDetails, displaySets } = options;\n  const match = displaySetMatchDetails.get(sameDisplaySetId);\n  if( !match ) {\n    console.log(\"No match for display set\", sameDisplaySetId);\n    return false;\n  }\n  const { displaySetInstanceUID } = match;\n  const altDisplaySet = displaySets.find(it => it.displaySetInstanceUID==displaySetInstanceUID);\n  if( !altDisplaySet ) {\n    console.log(\"No display set found with\", displaySetInstanceUID, \"in\", displaySets);\n    return false;\n  }\n  const testValue = altDisplaySet[sameAttribute];\n  return testValue===displaySet[sameAttribute];\n}","export default (study, extraData) => extraData?.displaySets?.length;","export default (study, extraData) => Math.max(...(extraData?.displaySets?.map?.(ds => (ds.numImageFrames ?? 0))) || [0]);","import { Types } from '@ohif/core';\n\nimport { id } from './id';\n\nimport getCustomizationModule from './getCustomizationModule';\n// import {setViewportZoomPan, storeViewportZoomPan } from './custom-viewport/setViewportZoomPan';\nimport sameAs from './custom-attribute/sameAs';\nimport numberOfDisplaySets from './custom-attribute/numberOfDisplaySets';\nimport maxNumImageFrames from './custom-attribute/maxNumImageFrames';\n\n/**\n * The test extension provides additional behaviour for testing various\n * customizations and settings for OHIF.\n */\nconst testExtension: Types.Extensions.Extension = {\n  /**\n   * Only required property. Should be a unique value across all extensions.\n   */\n  id,\n\n  /** Register additional behaviour:\n   *   * HP custom attribute seriesDescriptions to retrieve an array of all series descriptions\n   *   * HP custom attribute numberOfDisplaySets to retrieve the number of display sets\n   *   * HP custom attribute numberOfDisplaySetsWithImages to retrieve the number of display sets containing images\n   *   * HP custom attribute to return a boolean true, when the attribute sameAttribute has the same\n   *     value as another series description in an already matched display set selector named with the value\n   *     in `sameDisplaySetId`\n   */\n  preRegistration: ({ servicesManager }: Types.Extensions.ExtensionParams) => {\n    const { hangingProtocolService } = servicesManager.services;\n    hangingProtocolService.addCustomAttribute(\n      'numberOfDisplaySets',\n      'Number of displays sets',\n      numberOfDisplaySets\n    );\n    hangingProtocolService.addCustomAttribute(\n      'maxNumImageFrames',\n      'Maximum of number of image frames',\n      maxNumImageFrames\n    );\n    hangingProtocolService.addCustomAttribute(\n      'sameAs',\n      'Match an attribute in an existing display set',\n      sameAs\n    );\n  },\n\n  /** Registers some customizations */\n  getCustomizationModule,\n};\n\nexport default testExtension;\n","import {\n  codingValues,\n  contextMenuCodeItem,\n  findingsContextMenu,\n} from './custom-context-menu';\n\nexport default function getCustomizationModule() {\n  return [\n    {\n      name: 'custom-context-menu',\n      value: [codingValues, contextMenuCodeItem, findingsContextMenu],\n    },\n  ];\n}\n"],"names":["id","packageJson","text","type","color","transform","customizationService","code","codeRef","this","Error","get","ref","label","commands","commandName","customizationType","menus","selector","_ref","nearbyToolData","items","actionType","subMenu","_ref2","protocol","delegating","_ref3","_ref4","_ref5","displaySet","options","sameAttribute","sameDisplaySetId","console","log","displaySetMatchDetails","displaySets","match","displaySetInstanceUID","altDisplaySet","find","it","study","extraData","length","Math","max","map","ds","numImageFrames","preRegistration","servicesManager","hangingProtocolService","services","addCustomAttribute","numberOfDisplaySets","maxNumImageFrames","sameAs","getCustomizationModule","name","value","codingValues","contextMenuCodeItem","findingsContextMenu"],"sourceRoot":""}